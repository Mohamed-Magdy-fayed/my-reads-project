{"version":3,"sources":["BooksAPI.js","Selector.js","Book.js","UseDebounce.js","UseTimeout.js","Search.js","Shelf.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","update","book","shelf","fetch","concat","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","then","res","json","selector","_ref","toUpdateBooks","isInSearch","updateSearch","react_default","a","createElement","className","onChange","e","target","value","BooksAPI","defaultValue","disabled","href","infoLink","rel","style","width","height","backgroundImage","imageLinks","thumbnail","Selector","title","authors","useDebounce","callBack","delay","dependencies","_useTimeout","callBackRef","useRef","timeoutRef","useEffect","current","set","useCallback","setTimeout","clear","clearTimeout","reset","useTimeout","toConsumableArray","search","toSetResults","_useState","useState","_useState2","slicedToArray","query","setQuery","_useState3","_useState4","searchResults","setSearchResults","getSearchResults","console","log","data","books","error","forEach","bookId","newBook","react_router_dom","to","type","placeholder","map","result","key","Book","shelfName","name","shelfBooks","filter","BooksApp","state","this","setState","react_router","path","element","Search","updateBooks","exact","Shelf","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7d4c6c6b.chunk.js","sourcesContent":["\r\nconst api = \"https://reactnd-books-api.udacity.com\"\r\n\r\n\r\n// Generate a unique token for storing your bookshelf data on the backend server.\r\nlet token = localStorage.token\r\nif (!token)\r\n  token = localStorage.token = Math.random().toString(36).substr(-8)\r\n\r\nconst headers = {\r\n  'Accept': 'application/json',\r\n  'Authorization': token\r\n}\r\n\r\nexport const get = (bookId) =>\r\n  fetch(`${api}/books/${bookId}`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.book)\r\n\r\nexport const getAll = () =>\r\n  fetch(`${api}/books`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.books)\r\n\r\nexport const update = (book, shelf) =>\r\n  fetch(`${api}/books/${book.id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ shelf })\r\n  }).then(res => res.json())\r\n\r\nexport const search = (query) =>\r\n  fetch(`${api}/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ query })\r\n  }).then(res => res.json())\r\n    .then(data => data.books)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport * as BooksAPI from './BooksAPI'\r\n\r\nconst selector = ({ book, toUpdateBooks, isInSearch }) => {\r\n\r\n    const changeShelf = (shelf) => {\r\n        if (isInSearch) {\r\n            updateSearch(shelf)\r\n            BooksAPI.update(book, shelf)\r\n            .then(() => {toUpdateBooks()})\r\n        } else {\r\n            BooksAPI.update(book, shelf)\r\n            .then(() => {toUpdateBooks()})\r\n        }\r\n    }\r\n\r\n    const updateSearch = (shelf) => {\r\n        book.shelf = shelf\r\n    }\r\n\r\n    return (\r\n        <div className=\"book-shelf-changer\">\r\n            <select onChange={(e) => {\r\n                changeShelf(e.target.value)\r\n            }} defaultValue={book.shelf ? book.shelf : 'none'}>\r\n                <option value=\"move\" disabled>Move to...</option>\r\n                <option value=\"currentlyReading\">Currently Reading</option>\r\n                <option value=\"wantToRead\">Want to Read</option>\r\n                <option value=\"read\">Read</option>\r\n                <option value=\"none\">None</option>\r\n            </select>\r\n        </div>\r\n    )\r\n}\r\n\r\nselector.propTypes = {\r\n    book: PropTypes.object,\r\n}\r\n\r\nexport default selector\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Selector from './Selector'\r\n\r\nconst book = ({ book, toUpdateBooks, isInSearch }) => {\r\n\r\n    return (\r\n        <div className=\"book-frame\">\r\n            <div className=\"book\">\r\n                <div className=\"book-top\">\r\n                    <a href={book.infoLink} target='_blank' rel='noopener noreferrer'>\r\n                        <div\r\n                            className=\"book-cover\"\r\n                            style={{\r\n                                width: 128, height: 193,\r\n                                backgroundImage: `url('${book.imageLinks && book.imageLinks.thumbnail}')`\r\n                            }}>\r\n                        </div>\r\n                    </a>\r\n                    <Selector isInSearch={isInSearch} toUpdateBooks={toUpdateBooks} book={book} />\r\n                </div>\r\n                <div className=\"book-info\">\r\n                    <div className=\"book-title\">{book.title}</div>\r\n                    <div className=\"book-authors\">{book.authors && book.authors[0]} <br /> {book.authors && book.authors[1]}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nbook.propTypes = {\r\n    book: PropTypes.object,\r\n}\r\n\r\nexport default book\r\n","import { useEffect } from \"react\";\r\nimport useTimeout from \"./UseTimeout\";\r\n\r\nexport default function useDebounce(callBack, delay, dependencies) {\r\n    const { reset, clear } = useTimeout(callBack, delay)\r\n    useEffect(reset, [...dependencies, reset])\r\n    useEffect(clear, [])\r\n}","import { useCallback, useEffect, useRef } from \"react\";\r\n\r\nexport default function useTimeout(callBack, delay) {\r\n    const callBackRef = useRef(callBack)\r\n    const timeoutRef = useRef()\r\n\r\n    useEffect(() => {\r\n        callBackRef.current = callBack\r\n    }, [callBack])\r\n\r\n    const set = useCallback(() => {\r\n        timeoutRef.current = setTimeout(() => callBackRef.current(), delay)\r\n    }, [delay])\r\n\r\n    const clear = useCallback(() => {\r\n        timeoutRef.current && clearTimeout(timeoutRef.current)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        set()\r\n        return clear\r\n    }, [delay, set, clear])\r\n\r\n    const reset = useCallback(() => {\r\n        clear()\r\n        set()\r\n    }, [clear, set])\r\n\r\n    return { reset, clear }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport debounce from 'lodash.debounce'\r\nimport * as BooksAPI from './BooksAPI'\r\nimport Book from './Book'\r\nimport useDebounce from './UseDebounce'\r\n\r\nconst search = ({ toUpdateBooks }) => {\r\n\r\n    let toSetResults = []\r\n    const [query, setQuery] = useState('')\r\n    const [searchResults, setSearchResults] = useState([])\r\n    const getSearchResults = (query) => {\r\n        console.log(query);\r\n        if (query === '') {\r\n            setSearchResults([])\r\n        }\r\n        BooksAPI.search(query)\r\n            .then((books) => {\r\n                if (books && books.error) {\r\n                    setSearchResults([])\r\n                    return\r\n                }\r\n                books && books.forEach((book) => {\r\n                    BooksAPI.get(book.id)\r\n                        .then(newBook => {\r\n                            toSetResults = [...toSetResults, newBook]\r\n                        })\r\n                        .then(() => setSearchResults(toSetResults))\r\n                })\r\n            })\r\n    }\r\n\r\n    useDebounce(() => getSearchResults(query), 500, [query])\r\n\r\n    return (\r\n        <div className=\"search-books\">\r\n            <div className=\"search-books-bar\">\r\n                <Link to='/'><button className='close-search'>Close</button></Link>\r\n                <div className=\"search-books-input-wrapper\">\r\n                    <input\r\n                        onChange={(e) => {\r\n                            setQuery(e.target.value)\r\n                        }}\r\n                        value={query}\r\n                        type=\"text\"\r\n                        placeholder=\"Search by title or author\" />\r\n\r\n                </div>\r\n            </div>\r\n            <div className=\"search-books-results\">\r\n                <ol className=\"books-grid\">\r\n                    {searchResults && (\r\n                        searchResults.map(result => (\r\n                            <li key={result.id}>\r\n                                <Book isInSearch={true} toUpdateBooks={toUpdateBooks} book={result} />\r\n                            </li>\r\n                        ))\r\n                    )}\r\n                </ol>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default search\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Book from './Book'\r\n\r\nconst shelf = ({ shelfName, name, books, toUpdateBooks }) => {\r\n\r\n    let shelfBooks = books.filter(book => book.shelf === shelfName)\r\n\r\n    return (\r\n        <div className=\"bookshelf\">\r\n            <h2 className=\"bookshelf-title\">{name}</h2>\r\n            <div className=\"bookshelf-books\">\r\n                <ol className=\"books-grid\">\r\n                    {shelfBooks.map(book => (\r\n                        <li key={book.id}>\r\n                            <Book toUpdateBooks={toUpdateBooks} book={book} />\r\n                        </li>\r\n                    ))}\r\n                </ol>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nshelf.propTypes = {\r\n    shelfName: PropTypes.string,\r\n    name: PropTypes.string,\r\n    books: PropTypes.array,\r\n}\r\n\r\nexport default shelf\r\n","import React from 'react'\r\nimport * as BooksAPI from './BooksAPI'\r\nimport './App.css'\r\nimport Search from './Search'\r\nimport Shelf from './Shelf'\r\nimport { Route, Routes, Link } from 'react-router-dom'\r\n\r\nclass BooksApp extends React.Component {\r\n  state = {\r\n    books: [],\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const books = await BooksAPI.getAll();\r\n    this.setState({ books })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        <Routes>\r\n          <Route path='/search' element={(\r\n            <Search toUpdateBooks={this.updateBooks} />\r\n          )} />\r\n\r\n          <Route exact path='/' element={(\r\n            <div className=\"list-books\">\r\n              <div className=\"list-books-title\">\r\n                <h1>MyReads</h1>\r\n              </div>\r\n              <div className=\"list-books-content\">\r\n                <div>\r\n                  <Shelf toUpdateBooks={this.updateBooks} shelfName='currentlyReading' name='Currently Reading' books={this.state.books} />\r\n                  <Shelf toUpdateBooks={this.updateBooks} shelfName='wantToRead' name='Want To Read' books={this.state.books} />\r\n                  <Shelf toUpdateBooks={this.updateBooks} shelfName='read' name='Read' books={this.state.books} />\r\n                </div>\r\n              </div>\r\n              <div className=\"open-search\">\r\n                <Link to='/search'><button>Add a book</button></Link>\r\n              </div>\r\n            </div>\r\n          )} />\r\n        </Routes>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BooksApp\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { HashRouter } from 'react-router-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <HashRouter>\r\n        <App />\r\n    </HashRouter>, document.getElementById('root'))\r\n"],"sourceRoot":""}